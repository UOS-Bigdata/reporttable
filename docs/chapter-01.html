<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; 결측자료의 발생원인과 유형 – R 과 Quarto 를 이용한 데이터 테이블 작성</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../docs/chapter-02.html" rel="next">
<link href="../docs/chapter-00.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-fb762249214fc7ee1b59eab0aac55b3a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "일치 없음",
    "search-matching-documents-text": "일치된 문서",
    "search-copy-link-title": "검색 링크 복사",
    "search-hide-matches-text": "추가 검색 결과 숨기기",
    "search-more-match-text": "추가 검색결과",
    "search-more-matches-text": "추가 검색결과",
    "search-clear-button-title": "제거",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "취소",
    "search-submit-button-title": "검색",
    "search-label": "검색"
  }
}</script>
<script type="text/javascript">
 window.MathJax = {
  tex: {
    macros: {
    RR: '{\\mathbb R}',                    // a simple string replacement
    hatmat:'{\\pmb X ({\\pmb X}^t {\\pmb X} )^{-1} {\\pmb X}^t}',
    bold: ['\\boldsymbol{#1}',1] ,     // this macro has one parameter
    pardiff: ['\\frac{\\partial#2}{\\partial#1}', 2, 'x'], // this macro has an optional parameter that defaults to 'x'
    pardifftwo: ['\\frac{\\partial#1}{\\partial#2}', 2]
  },
  environments: {
  braced: ["\\left\\{", "\\right\\}"]
  }
 }
};
</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../docs/chapter-01.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">결측자료의 발생원인과 유형</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="사이드바 전환" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="검색" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">R 과 Quarto 를 이용한 데이터 테이블 작성</a> 
        <div class="sidebar-tools-main">
    <a href="../R-과-Quarto-를-이용한-데이터-테이블-작성.pdf" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="검색"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">개요</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/chapter-00.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">효율적인 통계의 생산</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/chapter-01.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">결측자료의 발생원인과 유형</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/chapter-02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">데이터 요약표 작성의 기초</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/chapter-03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">통계표 출판</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../docs/appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">부록</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">목차</h2>
   
  <ul>
  <li><a href="#서론" id="toc-서론" class="nav-link active" data-scroll-target="#서론"><span class="header-section-number">2.1</span> 서론</a></li>
  <li><a href="#결측값-발생-원인과-영향" id="toc-결측값-발생-원인과-영향" class="nav-link" data-scroll-target="#결측값-발생-원인과-영향"><span class="header-section-number">2.2</span> 결측값 발생 원인과 영향</a>
  <ul class="collapse">
  <li><a href="#결측값-발생-원인" id="toc-결측값-발생-원인" class="nav-link" data-scroll-target="#결측값-발생-원인">결측값 발생 원인</a></li>
  <li><a href="#결측값이-통계-분석에-미치는-영향" id="toc-결측값이-통계-분석에-미치는-영향" class="nav-link" data-scroll-target="#결측값이-통계-분석에-미치는-영향">결측값이 통계 분석에 미치는 영향</a></li>
  </ul></li>
  <li><a href="#결측값의-분포와-패턴" id="toc-결측값의-분포와-패턴" class="nav-link" data-scroll-target="#결측값의-분포와-패턴"><span class="header-section-number">2.3</span> 결측값의 분포와 패턴</a>
  <ul class="collapse">
  <li><a href="#결측값-분석의-중요성" id="toc-결측값-분석의-중요성" class="nav-link" data-scroll-target="#결측값-분석의-중요성">결측값 분석의 중요성</a></li>
  <li><a href="#결측값의-분포와-패턴-분석-방법" id="toc-결측값의-분포와-패턴-분석-방법" class="nav-link" data-scroll-target="#결측값의-분포와-패턴-분석-방법">결측값의 분포와 패턴 분석 방법</a></li>
  </ul></li>
  <li><a href="#결측값-대체" id="toc-결측값-대체" class="nav-link" data-scroll-target="#결측값-대체"><span class="header-section-number">2.4</span> 결측값 대체</a></li>
  <li><a href="#실습-결측값의-검토와-패턴-분석" id="toc-실습-결측값의-검토와-패턴-분석" class="nav-link" data-scroll-target="#실습-결측값의-검토와-패턴-분석"><span class="header-section-number">2.5</span> 실습: 결측값의 검토와 패턴 분석</a>
  <ul class="collapse">
  <li><a href="#결측값-패턴-분석을-위한-도구" id="toc-결측값-패턴-분석을-위한-도구" class="nav-link" data-scroll-target="#결측값-패턴-분석을-위한-도구">결측값 패턴 분석을 위한 도구</a></li>
  <li><a href="#예제-자료" id="toc-예제-자료" class="nav-link" data-scroll-target="#예제-자료">예제 자료</a></li>
  <li><a href="#결측값의-검토" id="toc-결측값의-검토" class="nav-link" data-scroll-target="#결측값의-검토">결측값의 검토</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-missing" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">결측자료의 발생원인과 유형</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>이장에서는 결측자료의 발생원인과 유형에 대하여 살펴보고 싱제 자료를 이용한 결측값에 대한 처리를 연습해 본다.에 대한 전반적인 이해를 해보자.</p>
<section id="서론" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="서론"><span class="header-section-number">2.1</span> 서론</h2>
<p>데이터 분석에서 신뢰할 수 있는 결과를 도출하기 위해서는 정확하고 완전한 데이터를 확보하는 것이 필수적이다. 그러나 현실에서는 다양한 이유로 인해 데이터의 일부가 누락되는 <strong>결측값(missing data)</strong> 문제가 발생한다. 결측값은 데이터 수집, 입력, 저장, 관리 등의 다양한 과정에서 생길 수 있으며, 연구 설계 및 방법론의 한계로 인해 발생하기도 한다. 이러한 결측값은 단순한 누락된 정보 이상의 의미를 가지며, 분석의 신뢰성과 해석 가능성에 큰 영향을 미칠 수 있다.</p>
<p>결측값이 포함된 데이터는 표본의 대표성을 저하시킬 수 있으며, 분석 결과를 왜곡시킬 가능성이 크다. 또한, 결측값을 처리하는 방식에 따라 분석 결과가 달라질 수 있어 연구자가 신중하게 접근해야 한다. 특히, 통계적 검정과 추정의 정확도가 낮아지거나, 데이터 활용의 효율성이 감소하는 등의 문제가 발생할 수 있다. 따라서 결측값이 발생하는 원인을 파악하고, 이에 대한 적절한 처리 방법을 적용하는 것은 데이터 분석에서 필수적인 과정이다.</p>
<p>이 장에서는 결측값이 발생하는 주요 원인을 분석하고, 결측값이 통계 분석에 미치는 영향을 체계적으로 살펴본다. 이를 통해 데이터의 완전성을 유지하고 분석 결과의 신뢰성을 높이는 전략을 모색할 수 있을 것이다.</p>
</section>
<section id="결측값-발생-원인과-영향" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="결측값-발생-원인과-영향"><span class="header-section-number">2.2</span> 결측값 발생 원인과 영향</h2>
<p>데이터 분석에서 결측값은 연구의 신뢰성을 저하시킬 수 있는 중요한 요소이다. 결측값이 발생하는 원인은 다양하며, 이는 데이터 수집, 입력 및 처리, 저장 및 관리, 연구 설계 등의 과정에서 나타날 수 있다. 또한, 결측값은 통계 분석의 정확성과 신뢰성에도 영향을 미칠 수 있어 이에 대한 적절한 이해와 처리가 필수적이다.</p>
<section id="결측값-발생-원인" class="level3">
<h3 class="anchored" data-anchor-id="결측값-발생-원인">결측값 발생 원인</h3>
<p>결측값은 데이터가 정상적으로 수집·입력·저장되지 못한 경우 발생하며, 그 원인은 다음과 같이 네 가지 주요 과정에서 찾을 수 있다.</p>
<section id="데이터-수집-과정의-문제" class="level4">
<h4 class="anchored" data-anchor-id="데이터-수집-과정의-문제">데이터 수집 과정의 문제</h4>
<p>데이터가 처음 수집되는 단계에서 결측값이 발생할 수 있다.</p>
<ul>
<li>설문조사 응답 누락: 조사 대상자가 질문에 답변하지 않는 경우 발생하며, 이는 의도적인 응답 회피, 무지, 무관심 등의 요인으로 인해 발생할 수 있다.<br>
</li>
<li>기술적 문제: 장비의 고장이나 네트워크 장애로 인해 데이터가 정상적으로 기록되지 않는 경우도 있다.</li>
</ul>
</section>
<section id="데이터-입력-및-처리-과정의-문제" class="level4">
<h4 class="anchored" data-anchor-id="데이터-입력-및-처리-과정의-문제">데이터 입력 및 처리 과정의 문제</h4>
<p>데이터가 입력되거나 변환되는 과정에서 실수나 오류로 인해 결측값이 발생할 수 있다.</p>
<ul>
<li>데이터 입력 오류: 수작업으로 데이터를 입력할 때 실수가 발생하거나, 자동 입력 시스템에서 오류가 발생할 수 있다.<br>
</li>
<li>데이터 처리 및 변환 오류: 데이터 변환 과정에서 적절한 값이 입력되지 않거나, 오류로 인해 일부 값이 손실될 수 있다.</li>
</ul>
</section>
<section id="데이터-저장-및-관리-과정의-문제" class="level4">
<h4 class="anchored" data-anchor-id="데이터-저장-및-관리-과정의-문제">데이터 저장 및 관리 과정의 문제</h4>
<p>데이터가 저장되고 관리되는 과정에서도 결측값이 발생할 가능성이 있다.</p>
<ul>
<li>데이터베이스 관리 문제: 저장 공간의 제한으로 인해 일부 데이터가 삭제되거나, 데이터 정리 과정에서 중요한 값이 누락될 수 있다.<br>
</li>
<li>백업 및 복원 문제: 백업 과정에서 일부 데이터가 저장되지 않거나, 복원 시 손실되는 경우도 결측값의 원인이 된다.</li>
</ul>
</section>
<section id="연구-설계-및-방법론의-문제" class="level4">
<h4 class="anchored" data-anchor-id="연구-설계-및-방법론의-문제">연구 설계 및 방법론의 문제</h4>
<p>연구 설계 자체의 한계로 인해 데이터를 충분히 확보하지 못하는 경우도 있다.</p>
<ul>
<li>연구 설계의 불완전성: 중요한 변수가 설계에서 누락되었거나, 질문이 부적절하게 구성되었을 경우 특정 값이 수집되지 못할 수 있다.<br>
</li>
<li>데이터 수집 방법의 한계: 표본 설계에서 오류가 발생하면 특정 그룹의 데이터가 충분히 확보되지 못하여 결측값이 발생할 가능성이 있다.</li>
</ul>
</section>
</section>
<section id="결측값이-통계-분석에-미치는-영향" class="level3">
<h3 class="anchored" data-anchor-id="결측값이-통계-분석에-미치는-영향">결측값이 통계 분석에 미치는 영향</h3>
<p>결측값은 통계 분석의 신뢰성을 저하시킬 수 있으며, 분석 결과의 해석과 활용에 여러 가지 문제를 야기할 수 있다. 결측값이 미치는 주요 영향은 다음과 같다.</p>
<section id="통계적-추정의-정확성-저하" class="level4">
<h4 class="anchored" data-anchor-id="통계적-추정의-정확성-저하">통계적 추정의 정확성 저하</h4>
<ul>
<li>표본 크기의 감소: 결측값을 포함한 데이터를 제거하면 전체 표본 크기가 줄어들어 통계적 정확도가 낮아진다. 이는 분석 결과의 신뢰도를 저하시킬 수 있으며, 표본이 모집단을 대표하는 특성을 잃을 가능성이 있다.<br>
</li>
<li>왜곡된 추정: 결측값이 특정한 패턴을 가지고 나타날 경우 분석 결과가 편향될 수 있다. 예를 들어, 특정 그룹에서 결측값이 더 많이 발생한다면, 분석 결과가 해당 그룹의 특성을 반영하지 못할 수 있다.</li>
</ul>
</section>
<section id="분석-결과의-해석-어려움" class="level4">
<h4 class="anchored" data-anchor-id="분석-결과의-해석-어려움">분석 결과의 해석 어려움</h4>
<ul>
<li>해석의 모호성: 결측값을 어떻게 처리하느냐에 따라 분석 결과가 달라질 수 있으며, 이는 연구자가 분석 결과를 해석하는 데 어려움을 줄 수 있다.<br>
</li>
<li>일반화의 제한: 특정 그룹에서 결측값이 집중적으로 발생했다면, 연구 결과를 전체 모집단에 적용하기 어려울 수 있다.</li>
</ul>
</section>
<section id="데이터-분석의-효율성-감소" class="level4">
<h4 class="anchored" data-anchor-id="데이터-분석의-효율성-감소">데이터 분석의 효율성 감소</h4>
<ul>
<li>데이터 활용 제한: 결측값이 많으면 사용할 수 있는 데이터의 양이 줄어들고, 특히 머신러닝 모델과 같은 고급 분석 기법을 적용하는 것이 어려워질 수 있다.<br>
</li>
<li>분석 과정의 복잡성 증가: 결측값을 처리하기 위해 보간법(imputation), 대체 값 적용 등의 추가적인 작업이 필요하며, 이로 인해 분석 과정이 복잡해지고 시간이 더 소요될 수 있다.</li>
</ul>
</section>
<section id="통계적-검정의-신뢰성-저하" class="level4">
<h4 class="anchored" data-anchor-id="통계적-검정의-신뢰성-저하">통계적 검정의 신뢰성 저하</h4>
<ul>
<li>유효성 저하: 결측값이 많을 경우 수행하는 통계적 검정의 결과가 신뢰할 수 없는 수준이 될 수 있다. 이는 잘못된 결론을 초래할 위험이 있다.<br>
</li>
<li>추정량의 분산 증가: 결측값을 대체하는 방식에 따라 데이터의 분산이 증가할 수 있으며, 이는 통계적 검정의 정확도를 낮추고 결과의 신뢰성을 저하시킬 수 있다.</li>
</ul>
<p>결측값은 데이터 분석 과정에서 피할 수 없는 문제이며, 이를 적절히 처리하지 않으면 연구의 신뢰성과 분석 결과의 정확성이 크게 저하될 수 있다. 따라서 데이터 수집, 입력, 저장, 관리 및 분석 과정에서 결측값을 최소화하기 위한 전략을 마련하는 것이 필요하다. 또한, 결측값이 발생했을 때 이를 올바르게 처리하는 방법을 적용하여 통계 분석의 신뢰성과 활용도를 높이는 것이 중요하다.</p>
</section>
</section>
</section>
<section id="결측값의-분포와-패턴" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="결측값의-분포와-패턴"><span class="header-section-number">2.3</span> 결측값의 분포와 패턴</h2>
<p>데이터 분석에서 결측값을 효과적으로 처리하기 위해서는 먼저 <strong>결측값의 분포와 패턴</strong>을 정확히 파악하는 과정이 필요하다. 단순히 결측값이 존재하는지 여부만 확인하는 것이 아니라, 결측값이 어떻게 분포되어 있으며 특정 변수 간에 어떤 관계를 형성하는지 분석하는 것이 중요하다. 이를 통해 결측값이 데이터에 미치는 영향을 평가하고, 적절한 보완 및 대체 방법을 결정할 수 있다.</p>
<section id="결측값-분석의-중요성" class="level3">
<h3 class="anchored" data-anchor-id="결측값-분석의-중요성">결측값 분석의 중요성</h3>
<p>데이터에 결측값이 포함되어 있을 경우, 이를 무작정 삭제하거나 단순한 대체 값으로 채우는 것은 적절하지 않을 수 있다. 왜냐하면 결측값의 발생 원인과 분포 형태에 따라 분석 결과에 미치는 영향이 다를 수 있기 때문이다. 따라서 결측값을 처리하기 전에 반드시 결측값의 분포와 구조를 면밀히 분석해야 한다.</p>
<p>결측값이 특정 변수에 집중적으로 발생하는지, 여러 변수에서 동시에 나타나는지, 결측값이 일정한 패턴을 가지고 있는지 등의 요소를 파악하는 것은 이후 분석의 정확성을 높이는 데 중요한 역할을 한다.</p>
</section>
<section id="결측값의-분포와-패턴-분석-방법" class="level3">
<h3 class="anchored" data-anchor-id="결측값의-분포와-패턴-분석-방법">결측값의 분포와 패턴 분석 방법</h3>
<p>결측값의 구조를 이해하기 위해서는 여러 가지 분석 기법을 활용할 수 있다. 대표적인 방법은 다음과 같다.</p>
<section id="변수별-결측값-빈도-및-비율-분석" class="level4">
<h4 class="anchored" data-anchor-id="변수별-결측값-빈도-및-비율-분석">변수별 결측값 빈도 및 비율 분석</h4>
<p>먼저, 데이터의 각 변수에서 결측값이 얼마나 발생했는지를 파악해야 한다. 이를 위해 변수별로 <strong>결측값의 개수와 비율</strong>을 계산하는 것이 기본적인 방법이다. 특정 변수에서 결측값이 과도하게 많다면 해당 변수를 분석에 포함할 것인지, 대체 값을 사용할 것인지 등을 고려해야 한다.</p>
</section>
<section id="여러-변수에서의-결측값-위치-및-패턴-분석" class="level4">
<h4 class="anchored" data-anchor-id="여러-변수에서의-결측값-위치-및-패턴-분석">여러 변수에서의 결측값 위치 및 패턴 분석</h4>
<p>데이터에 존재하는 여러 변수들 간의 결측값 분포를 확인하는 것도 중요하다. 특정 변수에서 결측값이 발생할 때 다른 변수에서도 동일한 패턴으로 결측값이 발생하는지 확인하는 과정이 필요하다. 이를 통해 <strong>결측값이 무작위(random missing)</strong>인지, 아니면 특정한 규칙을 가지고 있는지 판단할 수 있다.</p>
</section>
<section id="변수-간-결측값의-관계-분석" class="level4">
<h4 class="anchored" data-anchor-id="변수-간-결측값의-관계-분석">변수 간 결측값의 관계 분석</h4>
<p>일부 변수에서 발생한 결측값이 다른 변수의 결측값과 관련되어 있을 수 있다. 예를 들어, 특정 연령대에서 설문 응답이 누락되는 패턴이 있다면, 연령 변수와 설문 응답 변수 간의 연관성을 고려해야 한다. 이를 파악하기 위해 변수 간의 결측값 관계를 분석하는 것이 필요하다.</p>
</section>
</section>
</section>
<section id="결측값-대체" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="결측값-대체"><span class="header-section-number">2.4</span> 결측값 대체</h2>
<p>데이터 분석에서 결측값을 적절히 처리하는 것은 연구의 신뢰성을 보장하는 중요한 요소이다. 결측값을 방치하면 분석 결과의 왜곡을 초래할 수 있으며, 잘못된 결론으로 이어질 위험이 크다. 하지만 모든 결측값이 동일한 방식으로 처리될 수 있는 것은 아니다. 데이터의 특성과 결측값 발생 패턴에 따라 적절한 처리 방법을 신중히 선택해야 한다.</p>
<p>결측값을 처리하는 다양한 방법이 존재하지만, 특정한 상황에서 반드시 사용해야 하는 고정된 방법은 없다. 그렇기 때문에 연구자는 전반적인 결측값 처리 기법을 숙지한 후, 데이터의 특성과 분석 목적에 맞는 방법을 직접 선택하는 것이 바람직하다.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
결측값을 대체하는 것보다 중요한 것은 예방이다
</div>
</div>
<div class="callout-body-container callout-body">
<p>데이터 분석에서 결측값을 처리하는 다양한 방법이 존재하지만, 보다 근본적으로 중요한 것은 애초에 결측값이 발생하지 않도록 하는 것이다. 결측값이 발생한 후 이를 보완하는 작업은 필연적으로 분석의 신뢰성을 저하시킬 위험이 있으며, 데이터의 원래 정보를 온전히 복원하기 어렵다. 따라서 결측값을 줄이기 위한 사전 예방 조치가 무엇보다 중요하며, 이는 시간과 비용을 투자할 가치가 있는 과정이다.</p>
<p>많은 연구와 실무에서 결측값이 발생하면 이를 삭제하거나 평균값, 회귀 모델 등을 활용하여 대체하는 방식으로 해결하려 한다. 하지만 어떤 방법을 사용하든, 결측값을 대체한 데이터는 원본 데이터와 동일한 정보량을 갖지 못한다는 점을 간과해서는 안 된다. 결측값 대체 과정에서 데이터의 변동성이 줄어들거나, 특정 패턴이 왜곡될 수 있으며, 결과적으로 분석의 신뢰성과 예측력도 낮아질 가능성이 크다.</p>
</div>
</div>
<p>결측값을 최소화하는 것이 중요하다. 하지만 현실적으로 결측값이 발생하는 경우, 다양한 보완 방법을 활용하여 데이터를 최대한 보존하는 방향으로 처리해야 한다.</p>
<ul>
<li><p>삭제법 (Deletion Method)</p>
<ul>
<li>가장 직관적인 방법은 결측값이 포함된 데이터를 제거하는 것이다. 여기에는 두 가지 방식이 있다.
<ul>
<li><p>행 삭제 (Listwise Deletion): 결측값이 포함된 레코드(행)를 제거하는 방식<br>
</p></li>
<li><p>열 삭제 (Variable Deletion): 특정 변수(열)에서 결측값이 많을 경우, 해당 변수를 분석에서 제외하는 방식</p></li>
<li><p>이 방법은 데이터가 완전 무작위로 결측되는 경우(MCAR; Missing Completely At Random) 유용할 수 있다. 그러나 데이터 손실이 크며, 표본 크기가 급격히 줄어들 수 있다는 단점이 있다.</p></li>
</ul></li>
</ul></li>
<li><p>단순 대체법 (Simple Imputation)</p>
<ul>
<li>결측값을 특정한 값으로 대체하는 방식으로, 비교적 간단하고 빠르게 적용할 수 있다.<br>
</li>
<li>Hot Deck 대체법: 결측된 레코드를 동일한 특성을 가진 다른 레코드의 값으로 대체<br>
</li>
<li>평균(중앙값) 대체: 연속형 변수의 결측값을 해당 변수의 평균(mean) 또는 중앙값(median)으로 대체<br>
</li>
<li>최빈값(Mode) 대체: 범주형 변수의 경우, 가장 많이 나타난 값(최빈값, mode)으로 대체<br>
</li>
<li>이 방법은 계산이 쉽고 빠르지만, 데이터의 분산을 감소시키고 편향을 초래할 가능성이 있다는 한계가 있다.</li>
</ul></li>
<li><p>예측 모델 기반 대체 (Model-Based Imputation)</p>
<ul>
<li>보다 정교한 접근법으로, 회귀 분석이나 거리 기반 알고리즘을 활용하여 결측값을 예측하는 방법이다.<br>
</li>
<li>회귀 대체법 (Regression Imputation): 다른 변수들을 활용하여 회귀 모델을 생성하고, 이 모델을 사용해 결측값을 예측하여 대체<br>
</li>
<li>거리 대체법 (Nearest Neighbor Imputation): 결측값이 없는 데이터 포인트와 가장 유사한 레코드를 찾아 해당 값을 대체<br>
</li>
<li>이 방법은 단순 대체법보다 데이터의 패턴을 더 잘 반영할 수 있지만, 모델이 올바르게 설정되지 않으면 추정값이 실제 데이터와 다르게 왜곡될 위험이 있다.</li>
</ul></li>
<li><p>다중 대체법 (Multiple Imputation, MI)</p>
<ul>
<li>다중 대체법은 결측값을 여러 번 대체하여 데이터의 불확실성을 반영하는 방법이다.<br>
</li>
<li>동일한 결측값에 대해 여러 번 대체 수행 (예: 5회, 10회)<br>
</li>
<li>각 대체본(imputed dataset)은 결측값이 서로 다른 값으로 대체된 별도의 데이터셋<br>
</li>
<li>최종 분석 시 여러 개의 대체본을 통합하여 결측값 처리의 불확실성을 반영<br>
</li>
<li>이 방법은 결측값을 처리하는 가장 발전된 기법 중 하나로, 통계적 추론에서 보다 신뢰할 수 있는 결과를 제공한다. 다만, 계산 과정이 복잡하고 추가적인 연산이 필요하다는 점이 단점이다.</li>
</ul></li>
</ul>
<p>결측값 처리 방법은 데이터의 특성과 분석 목적에 따라 신중하게 선택해야 한다. 무조건적인 삭제는 데이터 손실을 초래할 수 있으며, 단순 대체법은 분석 결과를 왜곡할 가능성이 있다. 보다 정교한 예측 모델 기반 대체법이나 다중 대체법을 활용하면 데이터의 패턴을 보존하면서도 결측값 문제를 효과적으로 해결할 수 있다.</p>
<p>궁극적으로 중요한 것은 결측값이 분석 결과에 미치는 영향을 최소화하는 방향으로 처리 전략을 설정하는 것이다. 연구자는 다양한 방법을 이해하고, 데이터의 특성을 고려하여 최적의 접근법을 선택하는 것이 필요하다.</p>
</section>
<section id="실습-결측값의-검토와-패턴-분석" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="실습-결측값의-검토와-패턴-분석"><span class="header-section-number">2.5</span> 실습: 결측값의 검토와 패턴 분석</h2>
<p>다양한 라이브러리를 활용하면 결측값의 위치와 패턴을 직관적으로 확인할 수 있으며, 이를 통해 결측값이 무작위로 발생한 것인지, 특정 그룹이나 변수에 집중적으로 나타나는지를 분석할 수 있다. 이러한 분석은 결측값 처리 방법을 결정하는 중요한 기초 자료가 되며, 분석 결과의 신뢰성을 높이는 데 기여한다.</p>
<p>결측값을 효과적으로 처리하기 위해서는 먼저 데이터 내에서 결측값이 어떻게 분포하고 있는지를 분석하는 과정이 필수적이다. 변수별 결측값의 빈도와 비율을 분석하고, 여러 변수 간 결측값의 위치와 패턴을 살펴봄으로써 결측값이 연구 결과에 미칠 영향을 최소화할 수 있다. 이를 위해 적절한 통계 프로그램과 시각화 기법을 활용하면 보다 정확한 결측값 분석이 가능하며, 이후의 데이터 처리 및 분석 과정에서 신뢰성을 확보할 수 있다.</p>
<section id="결측값-패턴-분석을-위한-도구" class="level3">
<h3 class="anchored" data-anchor-id="결측값-패턴-분석을-위한-도구">결측값 패턴 분석을 위한 도구</h3>
<p>결측값의 분포와 패턴을 보다 효과적으로 분석하기 위해서는 통계 프로그램 및 시각화 도구를 활용하는 것이 유용하다. 이를 통해 결측값이 무작위로 발생한 것인지, 특정 패턴을 가지고 있는지 확인할 수 있으며, 이후 결측값을 보완하는 전략을 수립하는 데 도움을 줄 수 있다.</p>
<p><code>R</code>에서는 결측값의 분석에 유용한 다음과 같은 패키지들이 있다.</p>
<ul>
<li><p><code>DescTools</code> 패키지</p>
<ul>
<li>다양한 기초 통계 분석의 방법을 제공하는 패키지</li>
<li><code>PlotMiss</code> 함수를 사용하여 결측값의 위치와 비율을 시각화할 수 있다.</li>
</ul></li>
<li><p><code>ggmice</code> 패키지 +<code>plot_pattern</code> 함수를 사용하여 결측값의 패턴을 시각화할 수 있다.</p></li>
<li><p><code>mice</code> 패키지</p>
<ul>
<li><code>mice</code> 함수를 사용하여 결측값을 대체한 자료를 생성</li>
</ul></li>
<li><p><code>naniar</code> 패키지</p>
<ul>
<li>체계적이며 간결한 방법으로 결측값에 대한 요약, 시각화, 대체를 할 수 있는 다양한 기능을 제공한다.</li>
</ul></li>
</ul>
<p><code>Python</code>에서는 <code>pandas</code> 라이브러리를 이용하여 결측값의 빈도와 비율을 쉽게 확인할 수 있으며, <code>missingno</code> 라이브러리를 활용하면 결측값의 분포를 시각적으로 분석할 수 있다.</p>
</section>
<section id="예제-자료" class="level3">
<h3 class="anchored" data-anchor-id="예제-자료">예제 자료</h3>
<p>서울 열린 데이터 광장에서 제공하는 2019년 서울특별시 부동산 실거래가 정보를 가진 자료를 어번 예제에 사용하려고 한다. 2019년 거래하여 신고한 주택들의 위치와 정보 그리고 실거래 가격이 포함된 총 67238건의 실제 거래자료는 거래된 주택에 대한 실거래가 등 다양한 정보를 포함하고 있다.</p>
<p>본 예제에서는 실습을 위하여 원래 자료의 일부를 분석할 것이며 교육을 위하여 결측값의 유형이 서로 다른 합성 자료(synthetic data)도 사용할 것이다. 다음은 이 절에서 사용할 예제 자료의 특성은 다음과 같다.</p>
<ul>
<li><p>예제 자료에서는 이미 지어진 아파트의 거래만 선택(분양 아파트 제외)</p></li>
<li><p>아파트의 거래에서 1000건의 자료만 임의로 선택</p></li>
<li><p>거래가격의 단위는 백만원으로 변경</p></li>
<li><p>결측값이 없는 원자료와 결측값의 유형이 다른 3개의 합성 자료로 구성</p></li>
<li><p>예제에서 사용할 자료는 다음과 같은 6개의 컬럼을 가지고 있다.</p>
<ul>
<li>실거래가아이디</li>
<li>건축년도 (주택이 지어진 년도)</li>
<li>자치구명</li>
<li>건물면적 (제곱미터)</li>
<li>층정보</li>
<li>물건금액 (거래 가격, 백만원)</li>
</ul></li>
</ul>
<p>이제 예제 자료를 포함한 <code>R</code> 데이터를 불러오자.</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data"</span>, <span class="st">"missing_data.RData"</span>))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "df_full"   "df_miss_1" "df_miss_2" "df_miss_3"</code></pre>
</div>
</div>
<p>결측값이 없는 예제 자료 <code>df_full</code> 의 일부는 아래와 같다. 결측값이 존재하는 다른 3개의 자료(<code>df_miss_1</code>, <code>df_miss_2</code>, <code>df_miss_3</code>)는 결측값이 없는 예제 자료 <code>df_full</code> 에서 결측값이 특정한 패턴을 가지고 발생하도록 만든 합성자료이다.</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(df_full <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-missing-fulldatashow" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-missing-fulldatashow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;2.1: 결측값이 없는 예제 자료
</figcaption>
<div aria-describedby="tbl-missing-fulldatashow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">실거래가아이디</th>
<th style="text-align: left;">자치구명</th>
<th style="text-align: right;">건축년도</th>
<th style="text-align: right;">건물면적</th>
<th style="text-align: right;">층정보</th>
<th style="text-align: right;">물건금액</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">송파구</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">59.88</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">1330</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">용산구</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">126.19</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">1560</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">성동구</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">59.96</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">750</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">서대문구</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">84.88</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">400</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">성동구</td>
<td style="text-align: right;">2016</td>
<td style="text-align: right;">84.64</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1300</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">중랑구</td>
<td style="text-align: right;">1997</td>
<td style="text-align: right;">84.08</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">450</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">광진구</td>
<td style="text-align: right;">2001</td>
<td style="text-align: right;">84.91</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">1025</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">송파구</td>
<td style="text-align: right;">2006</td>
<td style="text-align: right;">135.82</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">2332</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">성북구</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">84.83</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">620</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">성북구</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">84.90</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">505</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
<p>결측값이 있는 자료 <code>df_miss_1</code> 의 일부는 다음과 같으며 결측값은 <code>NA</code> 로 표시된다.</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(df_miss_1 <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">10</span>))</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="tbl-missing-missdatashow" class="cell quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-missing-missdatashow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
표&nbsp;2.2: 결측값이 있는 예제 자료
</figcaption>
<div aria-describedby="tbl-missing-missdatashow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<table class="do-not-create-environment cell caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">실거래가아이디</th>
<th style="text-align: left;">자치구명</th>
<th style="text-align: right;">건축년도</th>
<th style="text-align: right;">건물면적</th>
<th style="text-align: right;">층정보</th>
<th style="text-align: right;">물건금액</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">송파구</td>
<td style="text-align: right;">2007</td>
<td style="text-align: right;">59.88</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">용산구</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">126.19</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">1560</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">성동구</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">750</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">서대문구</td>
<td style="text-align: right;">2004</td>
<td style="text-align: right;">84.88</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">400</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">성동구</td>
<td style="text-align: right;">2016</td>
<td style="text-align: right;">84.64</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1300</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">중랑구</td>
<td style="text-align: right;">1997</td>
<td style="text-align: right;">84.08</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">450</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">광진구</td>
<td style="text-align: right;">2001</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">1025</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">송파구</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">135.82</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">2332</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">성북구</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">84.83</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">620</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">성북구</td>
<td style="text-align: right;">1994</td>
<td style="text-align: right;">84.90</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">505</td>
</tr>
</tbody>
</table>
</div>
</div>
</figure>
</div>
</div>
</section>
<section id="결측값의-검토" class="level3">
<h3 class="anchored" data-anchor-id="결측값의-검토">결측값의 검토</h3>
<p>먼저 결측값이 있는 자료 <code>df_miss_1</code> 에서 결측값의 위치를 시각적으로 살펴보기 위하여 다음과 같이 <code>PlotMiss</code> 함수를 사용해 보자.</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PlotMiss</span>(df_miss_1, <span class="at">main=</span><span class="st">"결측값의 위치와 비율"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-miss-random" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-miss-random-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;2.1: 결측값의 위치와 비율 - df_miss_1
</figcaption>
<div aria-describedby="fig-miss-random-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter-01_files/figure-html/fig-miss-random-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
<p><a href="#fig-miss-random" class="quarto-xref">그림&nbsp;<span>2.1</span></a> 을 보면 4개의 변수에 결측값이 존재하는 자료이며 그림 오른쪽에 각 변수에 존재하는 결측값의 개수외 비율이 나타난다.</p>
<p>이제 <code>plot_pattern</code> 함수를 이용하여 결측가 발생하는 패턴에 대해서 살펴보자</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_pattern</span>(df_miss_1, <span class="at">square=</span> <span class="cn">FALSE</span>) </span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-miss-random2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-miss-random2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;2.2: 무작위로 발생한 결측값
</figcaption>
<div aria-describedby="fig-miss-random2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter-01_files/figure-html/fig-miss-random2-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
<p><a href="#fig-miss-random2" class="quarto-xref">그림&nbsp;<span>2.2</span></a> 의 각 행은 결측값이 나타난 유형을 알려주며, 오른쪽의 숫자는 주어진 패턴으로 나타난 결측된 컬럼의 개수이다. 왼쪽은 결측값이 나타난 유형에 속하는 자료의 개수(pattern frequency)이다. 아래 쪽에 나타난 숫자는 각 컬럼에 나타나는 결측값의 개수이다.</p>
<p><a href="#fig-miss-random2" class="quarto-xref">그림&nbsp;<span>2.2</span></a> 에 나타나 결측값의 발생 형태를 보면 특별한 경향이 없이 4개의 변수에서 무작위로 발생한 것으로 판단된다.</p>
<p>다음으로 결측값이 있는 자료 <code>df_miss_2</code> 에서 결측값의 위치를 시각적으로 살펴보자.</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PlotMiss</span>(df_miss_2, <span class="at">main=</span><span class="st">"결측값의 위치와 비율"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-miss-hier" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-miss-hier-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;2.3: 결측값의 위치와 비율 - df_miss_2
</figcaption>
<div aria-describedby="fig-miss-hier-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter-01_files/figure-html/fig-miss-hier-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
<p><code>plot_pattern</code> 함수를 이용하여 결측가 발생하는 패턴에 대해서 살펴보자</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_pattern</span>(df_miss_2, <span class="at">square=</span> <span class="cn">FALSE</span>) </span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-miss-hier2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-miss-hier2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;2.4: 결측값의 계층적인 패턴
</figcaption>
<div aria-describedby="fig-miss-hier2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter-01_files/figure-html/fig-miss-hier2-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
<p><a href="#fig-miss-hier2" class="quarto-xref">그림&nbsp;<span>2.4</span></a> 에 나타나 결측값의 발생 형태를 보면 특별한 경향이 있는 것으로 보인다.</p>
<p><code>df_miss_2</code> 자료에서는 세 개의 변수에서 결측값이 존재하며, 이 결측값들은 단순한 무작위적 발생이 아닌 계층적인 패턴을 따르는 것으로 나타났다. 층정보<code>컬럼는</code>건물면적` 값이 결측된 경우, 반드시 결측되는 구조를 보였다. 즉, 건물면적에 대한 정보가 없는 경우 층수 역시 제공되지 않는 패턴이 관찰된 것이다. 이러한 상관관계는 데이터의 누락이 단순한 실수나 오류에서 비롯된 것이 아니라, 특정 컬럼 간 논리적인 관계 속에서 발생하고 있음을 보여준다.</p>
<p>또한, <code>물건금액</code> 컬럼의 경우, <code>층정보</code>가 결측되면 자동으로 결측값이 되는 구조를 보였다. 이는 물건금액이 층정보에 의존적이라는 점을 시사하며, 데이터의 구조적 특성을 이해하는 데 중요한 단서가 된다.</p>
<p>다음은 <code>naniar</code> 패키지에서 제공하는 결측값의 위치를 제공하는 함수 <code>geom_miss_point()</code> 를 사용하여 <code>건축년도</code> 와 <code>건물면적</code> 의 관게를 나타내는 산점도(scatter plot)에 <code>건물면적</code>이 없는 결측값을 나타낸 그림이다.</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_miss_2, </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">건축년도</span><span class="st">`</span>, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="st">`</span><span class="at">건물면적</span><span class="st">`</span>)) <span class="sc">+</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_miss_point</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-miss-hier3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-miss-hier3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;2.5: 두 변수와의 관계와 결측값 패턴
</figcaption>
<div aria-describedby="fig-miss-hier3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter-01_files/figure-html/fig-miss-hier3-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
<p><code>건물면적</code> 컬럼의 경우, 건축연도가 최근일수록 결측값이 발생할 가능성이 높은 것으로 확인된다. 이는 건축연도가 최신일수록 특정 정보가 기록되지 않는 경향이 있음을 시사한다.</p>
<p>마지막으로 결측값이 있는 자료 <code>df_miss_3</code> 에서 결측값의 위치를 시각적으로 살펴보자.</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PlotMiss</span>(df_miss_2, <span class="at">main=</span><span class="st">"결측값의 위치와 비율"</span>)</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-miss-nonig" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-miss-nonig-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;2.6: 결측값의 위치와 비율 - df_miss_3
</figcaption>
<div aria-describedby="fig-miss-nonig-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter-01_files/figure-html/fig-miss-nonig-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
<p><code>plot_pattern</code> 함수를 이용하여 자료 <code>df_miss_3</code> 에서 결측가 발생하는 패턴에 대해서 살펴보자</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_pattern</span>(df_miss_3, <span class="at">square=</span> <span class="cn">FALSE</span>) </span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-miss-nonig2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-miss-nonig2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;2.7: 중요한 컬럼에서 결측값의 발생
</figcaption>
<div aria-describedby="fig-miss-nonig2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter-01_files/figure-html/fig-miss-nonig2-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
<p><a href="#fig-miss-nonig2" class="quarto-xref">그림&nbsp;<span>2.7</span></a> 에 나타나 결측값의 발생 형태를 보면 자료레서 가장 관심있는 컬럼인 <code>물건금액</code> 에서만 10% 결측이 발생하였다. <code>물건금액</code> 이 중요한 변수이기 떄문에 결측값이 발생하는 패컨이 무작위인지 아니면 특별한 패턴을 가지고 있는지가 중요하다.</p>
<p>이제 <code>건물면적</code> 에 따라서 변하는 <code>물건금액</code> 에 대한 관계를 나타내는 산점도(scatter plot)에 <code>건물면적</code>이 없는 결측값을 나타낸 그림이다.</p>
<div class="cell">
<details class="code-fold">
<summary>코드</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_miss_3, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">건물면적</span><span class="st">`</span>, </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="st">`</span><span class="at">물건금액</span><span class="st">`</span>)) <span class="sc">+</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_miss_point</span>()</span></code><button title="클립보드 복사" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-miss-nonig3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-fig" id="fig-miss-nonig3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
그림&nbsp;2.8: 두 변수와의 관계와 결측값 패턴
</figcaption>
<div aria-describedby="fig-miss-nonig3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="chapter-01_files/figure-html/fig-miss-nonig3-1.png" class="img-fluid figure-img" width="672">
</div>
</figure>
</div>
</div>
</div>
<p><a href="#fig-miss-nonig3" class="quarto-xref">그림&nbsp;<span>2.8</span></a> 를 보면 자료에 <code>건물면적</code>이 커질수록 <code>물건금액</code> 이 결측값이 나타날 경향이 큰 것으로 보인다. 특히, <code>건물면적</code>이 매우 큰 자료에서는 <code>물건금액</code> 이 결측인 경우가 매우 많다. 이렇게 가장 관심있는 변수에서 나타나는 결측값의 패턴이 무작위가 아니라 자신의 값에 영향을 받는 경우, 결측값을 가진 단위를 제거한 자료를 분석한 결과는 실제 결과와 매우 다를 수 있다.</p>
<p>결측값의 발생 패턴을 무시한 채 단순히 보정하거나 제거할 경우, 데이터의 본질적인 특성을 왜곡할 위험이 있다. 따라서 결측값을 처리하기 전, 그 발생 구조를 면밀히 분석하고 적절한 보완 전략을 수립하는 것이 무엇보다 중요하다.</p>
<p>데이터 분석에서 결측값은 단순한 누락 이상의 의미를 지닌다. 특히, 결측값이 일정한 패턴을 보이며 발생할 경우, 이를 무작정 보완하거나 제거하는 것이 아니라 그 구조를 이해하는 것이 중요하다.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "복사완료!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "복사완료!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../docs/chapter-00.html" class="pagination-link" aria-label="효율적인 통계의 생산">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">효율적인 통계의 생산</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../docs/chapter-02.html" class="pagination-link" aria-label="데이터 요약표 작성의 기초">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">데이터 요약표 작성의 기초</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>